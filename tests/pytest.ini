[pytest]
minversion = 3.0
norecursedirs = test_cmake_build test_embed
addopts =
    # show summary of skipped tests
    -rs
    # Report xfails
    -rx
    # capture only Python print and C++ py::print, but not C output (low-level Python errors)
    --capture=sys
    # warnings for deprecated features
    -Wd
    # Error if markers are not listed below as well
    # Requires pytest 4.5, so not added here
    # --strict-markers
xfail_strict = true
filterwarnings =
    # make warnings into errors but ignore certain third-party extension issues
    error
    # importing scipy submodules on some version of Python
    ignore::ImportWarning
    # bogus numpy ABI warning (see numpy/#432)
    ignore:.*numpy.dtype size changed.*:RuntimeWarning
    ignore:.*numpy.ufunc size changed.*:RuntimeWarning
markers =
    xfail_linux: expected failure on Linux
    xfail_darwin: expected failure on MacOS
    xfail_win32: expected failure on Windows
    xfail_cpython: expected failure on CPython
    xfail_pypy: expected failure on PyPy (2+3)
    xfail_pypy2: expected failure on PyPy 2
    xfail_pypy3: expected failure on PyPy 3
    xfail_py2: expected failure on Python 2
    xfail_py3: expected failure on Python 3
    skip_linux: does not run on Linux
    skip_darwin: does not run on MacOS
    skip_win32: does not run on Windows
    skip_cpython: does not run on CPython
    skip_pypy: does not run on PyPy (2+3)
    skip_pypy2: does not run on PyPy 2
    skip_pypy3: does not run on PyPy 3
    skip_py2: does not run on Python 2
    skip_py3: does not run on Python 3
